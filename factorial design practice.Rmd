---
title: "Factorial Design Practice"
date:  "Last complied on `r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document: 
  
   
    theme: sandstone
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      cache = TRUE, 
                      warning = FALSE,
                      message = FALSE)
```

Suppose that you are a data scientist at Instagram, and you are interested in running an experiment to learn about how user engagement is influenced by ad frequency. Currently users see an ad every 8 posts in their social feed, but, in order to increase ad revenue, your manager is pressuring your team to show an ad every 5 posts, under the assumption that users will not behave any differently under this new regime. You are justifiably nervous about this change and you worry that this will substantially decrease user engagement and hurt the overall user experience. As such you propose an experiment to test this new regime before rolling it out to all users. You will set ad frequency with levels 9:1, 7:1, 4:1, 1:1 corresponding to ad frequencies of 1 in 10, 1 in 8, 1 in 5, and every other. Additionally, suppose ad type is introduced as a second design factor with levels photo, video.

1. Set up the treatment combinations for this experiment.  Conceptual alternative question: **describe how you would create all the treatment combinations for this experiment?**

Ad Frequency:
* 1 in 10, 1 in 8, 1 in 5, 1 in 3

Type
* Photo, video

```{r}
freq <-c(9,7,4,1)
type<-c("video", "photo")

grid<-expand.grid(freq, type)
grid
```
**I would use all possible combinations**


2. Set up the recommended run order for this experiment. Conceptual alternative question: what is the recommended run order for this experiment?

```{R}
# Create a vector for Ad Frequencies and Ad Types
ad_frequencies <- c("1 in 10", "1 in 8", "1 in 5", "1 in 3")
ad_types <- c("photo", "video")

# Create a data frame with all combinations of Ad Frequencies and Ad Types
experiment <- expand.grid(Ad_Frequency = ad_frequencies, Ad_Type = ad_types)

# Add a column for run order
experiment$Run_Order <- seq_len(nrow(experiment))

# Shuffle the rows to create a randomized run order
set.seed(123) # Set seed for reproducibility
experiment <- experiment[sample(nrow(experiment)), ]

# Print the run order
print(experiment)


```

3. The data for this experiment is in the Instagram.csv file.  You ran the experiment for a total of 5 weeks and measured the average ad revenue per week. Analyze the experiment and state your conclusion. Conceptual alternative questions: What do the results of the analysis tell you?  What should you do next?  Is this analysis correct?  What will be the degrees of freedom for each factor?

```{R}
df<-read.csv("https://raw.githubusercontent.com/losiewbw/ISA633/main/instagram.csv")
df$Ratio <- as.factor(df$Ratio)

df$Type <- as.factor(df$Type)
```

```{r}
mod<-aov(AdRev~Ratio+Type+Ratio*Type, data=df)
summary(mod)
```
From our anova we can see that the ratio of ads to posts matters but the type of advertisement does not


4. What are the best settings of type and frequency to maximize revenue? Conceptual alternative questions: **What type should they use going forward?  What level of ratio is best to maximize revenue?**


```{r}
library(multcomp)
tukey<-glht(mod, linfct=mcp(Ratio="Tukey"))
cld(tukey)
summary(tukey)
plot(tukey)
```

From the Tukey test we cannot determine which ratio is significantly better than the others

*It doesn't matter what type they use**

**9 is better then 1 but we cannot determine a difference between 7 and 4 so we could lean towards 9 but we should experiment more before making a decision**
